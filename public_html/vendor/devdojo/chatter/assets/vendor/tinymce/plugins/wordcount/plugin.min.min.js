tinymce.PluginManager.add("wordcount",function(g){function f(){g.theme.panel.find("#wordcount").text(["Words: {0}",h.getCount()])}var j,i,h=this;j=g.getParam("wordcount_countregex",/[\w\u2019\x27\-\u00C0-\u1FFF]+/g),i=g.getParam("wordcount_cleanregex",/[0-9.(),;:!?%#$?\x27\x22_+=\\\/\-]*/g),g.on("init",function(){var a=g.theme.panel&&g.theme.panel.find("#statusbar")[0];a&&tinymce.util.Delay.setEditorTimeout(g,function(){a.insert({type:"label",name:"wordcount",text:["Words: {0}",h.getCount()],classes:"wordcount",disabled:g.settings.readonly},0),g.on("setcontent beforeaddundo",f),g.on("keyup",function(b){32==b.keyCode&&f()})},0)}),h.getCount=function(){var a=g.getContent({format:"raw"}),d=0;if(a){a=a.replace(/\.\.\./g," "),a=a.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," "),a=a.replace(/(\w+)(&#?[a-z0-9]+;)+(\w+)/i,"$1$3").replace(/&.+?;/g," "),a=a.replace(i,"");var c=a.match(j);c&&(d=c.length)}return d}});