tinymce.PluginManager.add("autoresize",function(h){function g(){return h.plugins.fullscreen&&h.plugins.fullscreen.isFullscreen()}function l(A){var z,y,x,w,v,u,t,f,e,c,b,a,B=tinymce.DOM;if(y=h.getDoc()){if(x=y.body,w=y.documentElement,v=j.autoresize_min_height,!x||A&&"setcontent"===A.type&&A.initial||g()){return void (x&&w&&(x.style.overflowY="auto",w.style.overflowY="auto"))}t=h.dom.getStyle(x,"margin-top",!0),f=h.dom.getStyle(x,"margin-bottom",!0),e=h.dom.getStyle(x,"padding-top",!0),c=h.dom.getStyle(x,"padding-bottom",!0),b=h.dom.getStyle(x,"border-top-width",!0),a=h.dom.getStyle(x,"border-bottom-width",!0),u=x.offsetHeight+parseInt(t,10)+parseInt(f,10)+parseInt(e,10)+parseInt(c,10)+parseInt(b,10)+parseInt(a,10),(isNaN(u)||0>=u)&&(u=tinymce.Env.ie?x.scrollHeight:tinymce.Env.webkit&&0===x.clientHeight?0:x.offsetHeight),u>j.autoresize_min_height&&(v=u),j.autoresize_max_height&&u>j.autoresize_max_height?(v=j.autoresize_max_height,x.style.overflowY="auto",w.style.overflowY="auto"):(x.style.overflowY="hidden",w.style.overflowY="hidden",x.scrollTop=0),v!==i&&(z=v-i,B.setStyle(h.iframeElement,"height",v+"px"),i=v,tinymce.isWebKit&&0>z&&l(A))}}function k(a,d,c){tinymce.util.Delay.setEditorTimeout(h,function(){l({}),a--?k(a,d,c):c&&c()},d)}var j=h.settings,i=0;h.settings.inline||(j.autoresize_min_height=parseInt(h.getParam("autoresize_min_height",h.getElement().offsetHeight),10),j.autoresize_max_height=parseInt(h.getParam("autoresize_max_height",0),10),h.on("init",function(){var a,d;a=h.getParam("autoresize_overflow_padding",1),d=h.getParam("autoresize_bottom_margin",50),a!==!1&&h.dom.setStyles(h.getBody(),{paddingLeft:a,paddingRight:a}),d!==!1&&h.dom.setStyles(h.getBody(),{paddingBottom:d})}),h.on("nodechange setcontent keyup FullscreenStateChanged",l),h.getParam("autoresize_on_init",!0)&&h.on("init",function(){k(20,100,function(){k(5,1000)})}),h.addCommand("mceAutoResize",l))});