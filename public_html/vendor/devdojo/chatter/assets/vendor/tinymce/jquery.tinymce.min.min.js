!function(i){function h(){function a(b){"remove"===b&&this.each(function(e,d){var f=o(d);f&&f.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(e,d){var f=tinymce.get(d.id.replace(/_parent$/,""));f&&f.remove()})}function p(b){var f,e=this;if(null!=b){a.call(e),e.each(function(q,s){var r;(r=tinymce.get(s.id))&&r.setContent(b)})}else{if(e.length>0&&(f=tinymce.get(e[0].id))){return f.getContent()}}}function o(e){var d=null;return e&&e.id&&j.tinymce&&(d=tinymce.get(e.id)),d}function g(b){return !!(b&&b.length&&j.tinymce&&b.is(":tinymce"))}var c={};i.each(["text","html","val"],function(d,q){var f=c[q]=i.fn[q],e="text"===q;i.fn[q]=function(r){var u=this;if(!g(u)){return f.apply(u,arguments)}if(r!==n){return p.call(u.filter(":tinymce"),r),f.apply(u.not(":tinymce"),arguments),u}var t="",s=arguments;return(e?u:u.eq(0)).each(function(v,x){var w=o(x);t+=w?e?w.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):w.getContent({save:!0}):f.apply(i(x),s)}),t}}),i.each(["append","prepend"],function(e,r){var q=c[r]=i.fn[r],f="prepend"===r;i.fn[r]=function(s){var d=this;return g(d)?s!==n?("string"==typeof s&&d.filter(":tinymce").each(function(t,v){var u=o(v);u&&u.setContent(f?s+u.getContent():u.getContent()+s)}),q.apply(d.not(":tinymce"),arguments),d):void 0:q.apply(d,arguments)}}),i.each(["remove","replaceWith","replaceAll","empty"],function(q,f){var b=c[f]=i.fn[f];i.fn[f]=function(){return a.call(this,f),b.apply(this,arguments)}}),c.attr=i.fn.attr,i.fn.attr=function(d,s){var r=this,q=arguments;if(!d||"value"!==d||!g(r)){return s!==n?c.attr.apply(r,q):c.attr.apply(r,q)}if(s!==n){return p.call(r.filter(":tinymce"),s),c.attr.apply(r.not(":tinymce"),q),r}var f=r[0],e=o(f);return e?e.getContent({save:!0}):c.attr.apply(i(f),q)}}var n,m,l,k=[],j=window;i.fn.tinymce=function(p){function g(){var q=[],c=0;l||(h(),l=!0),b.each(function(s,r){var v,u=r.id,t=p.oninit;u||(r.id=u=tinymce.DOM.uniqueId()),tinymce.get(u)||(v=new tinymce.Editor(u,p,tinymce.EditorManager),q.push(v),v.on("init",function(){var x,w=t;b.css("visibility",""),t&&++c==q.length&&("string"==typeof w&&(x=-1===w.indexOf(".")?null:tinymce.resolve(w.replace(/\.\w+$/,"")),w=tinymce.resolve(w)),w.apply(x||tinymce,q))}))}),i.each(q,function(s,r){r.render()})}var f,e,d,b=this,a="";if(!b.length){return b}if(!p){return window.tinymce?tinymce.get(b[0].id):null}if(b.css("visibility","hidden"),j.tinymce||m||!(f=p.script_url)){1===m?k.push(g):g()}else{m=1,e=f.substring(0,f.lastIndexOf("/")),-1!=f.indexOf(".min")&&(a=".min"),j.tinymce=j.tinyMCEPreInit||{base:e,suffix:a},-1!=f.indexOf("gzip")&&(d=p.language||"en",f=f+(/\?/.test(f)?"&":"?")+"js=true&core=true&suffix="+escape(a)+"&themes="+escape(p.theme||"modern")+"&plugins="+escape(p.plugins||"")+"&languages="+(d||""),j.tinyMCE_GZ||(j.tinyMCE_GZ={start:function(){function c(q){tinymce.ScriptLoader.markDone(tinymce.baseURI.toAbsolute(q))}c("langs/"+d+".js"),c("themes/"+p.theme+"/theme"+a+".js"),c("themes/"+p.theme+"/langs/"+d+".js"),i.each(p.plugins.split(","),function(q,r){r&&(c("plugins/"+r+"/plugin"+a+".js"),c("plugins/"+r+"/langs/"+d+".js"))})},end:function(){}}));var o=document.createElement("script");o.type="text/javascript",o.onload=o.onreadystatechange=function(c){c=c||window.event,2===m||"load"!=c.type&&!/complete|loaded/.test(o.readyState)||(tinymce.dom.Event.domLoaded=1,m=2,p.script_loaded&&p.script_loaded(),g(),i.each(k,function(r,q){q()}))},o.src=f,document.body.appendChild(o)}return b},i.extend(i.expr[":"],{tinymce:function(d){var c;return !!(d.id&&"tinymce" in window&&(c=tinymce.get(d.id),c&&c.editorManager===tinymce))}})}(jQuery);